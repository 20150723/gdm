#!/bin/sh

PATH="@X_PATH@:$PATH:/bin:/usr/bin"
OLD_IFS=$IFS

gdmwhich () {
  COMMAND="$1"
  OUTPUT=
  IFS=:
  for dir in $PATH
  do
    if test -x "$dir/$COMMAND" ; then
      if test "x$OUTPUT" = "x" ; then
        OUTPUT="$dir/$COMMAND"
      fi
    fi
  done
  IFS=$OLD_IFS 
  echo "$OUTPUT"
}

SESSREG=`gdmwhich sessreg`
if [ "x$SESSREG" != "x" ] ; then
	"$SESSREG" -d -w /var/log/wtmp -u /var/run/utmp -x "$X_SERVERS" -h "$REMOTE_HOST" -l "$DISPLAY" "$USER"
fi

# If running on Solaris, run sessionexit script.
#
if [ -x "/etc/dt/config/sessionexit" ]; then
	/etc/dt/config/sessionexit
fi
if [ -x "/usr/dt/config/sessionexit" ]; then
	/usr/dt/config/sessionexit
fi

exit 0
