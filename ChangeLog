2007-09-11  William Jon McCann  <mccann@jhu.edu>

	* common/gdm-address.c: (gdm_address_is_loopback):
	Convert address to network byte order before comparison.
	Patch from Jacob Berkman <jacob@gnome.org>

2007-09-11  William Jon McCann  <mccann@jhu.edu>

	* config/gdm:
	* config/gdm-autologin:
	Update PAM config.

2007-09-11  William Jon McCann  <mccann@jhu.edu>

	* config/Makefile.am:
	* config/gnome.desktop.in.in:
	* configure.ac:
	Remove gnome-session.desktop since it is provided
	by gnome-session.

2007-09-11  William Jon McCann  <mccann@jhu.edu>

	* configure.ac:
	Fix distcheck.

2007-09-10  William Jon McCann  <mccann@jhu.edu>

	* daemon/INTERNALS:
	* daemon/Makefile.am:
	* daemon/gdm-factory-slave.c: (on_greeter_start),
	(on_greeter_stop), (run_greeter), (gdm_factory_slave_stop):
	* daemon/gdm-greeter-proxy.c:
	* daemon/gdm-greeter-proxy.h:
	* daemon/gdm-greeter-session.c: (change_user),
	(greeter_session_child_setup), (open_greeter_session),
	(close_greeter_session), (get_greeter_environment),
	(gdm_slave_whack_temp_auth_file), (create_temp_auth_file),
	(greeter_session_child_watch), (gdm_greeter_session_spawn),
	(gdm_greeter_session_start), (greeter_session_died),
	(gdm_greeter_session_stop),
	(gdm_greeter_session_set_server_address),
	(_gdm_greeter_session_set_x11_display_name),
	(_gdm_greeter_session_set_x11_display_hostname),
	(_gdm_greeter_session_set_x11_display_device),
	(_gdm_greeter_session_set_x11_display_is_local),
	(_gdm_greeter_session_set_x11_authority_file),
	(_gdm_greeter_session_set_user_name),
	(_gdm_greeter_session_set_group_name),
	(gdm_greeter_session_set_property),
	(gdm_greeter_session_get_property),
	(gdm_greeter_session_constructor),
	(gdm_greeter_session_class_init), (gdm_greeter_session_init),
	(gdm_greeter_session_finalize), (gdm_greeter_session_new):
	* daemon/gdm-greeter-session.h:
	* daemon/gdm-simple-slave.c: (on_user_verified),
	(on_greeter_start), (on_greeter_stop), (run_greeter),
	(gdm_simple_slave_stop):
	* daemon/gdm-slave.c:
	Rename GdmGreeterProxy->GdmGreeterSession

2007-09-10  William Jon McCann  <mccann@jhu.edu>

	* gui/simple-greeter/gdm-simple-greeter.c: (set_focus),
	(reset_dialog), (gdm_simple_greeter_info_query),
	(gdm_simple_greeter_secret_info_query):
	* gui/simple-greeter/gdm-simple-greeter.glade:
	* gui/simple-greeter/greeter-main.c:
	Don't auto-activate g-p-m.  Try to get focus in entry.

2007-09-08  William Jon McCann  <mccann@jhu.edu>

	* daemon/gdm-greeter-server.c: (greeter_server_message_handler),
	(connection_filter_function):
	* daemon/gdm-session-relay.c: (session_relay_message_handler),
	(connection_filter_function):
	* daemon/gdm-session.c: (session_message_handler),
	(connection_filter_function):
	Don't print null strings - solaris crashes.
	Patch from Brian Cameron <brian.cameron@sun.com>

2007-09-05  William Jon McCann  <mccann@jhu.edu>

	* configure.ac:
	* daemon/gdm-greeter-server.c: (handle_get_display_id):
	* gui/simple-greeter/Makefile.am:
	* gui/simple-greeter/cutnpaste/Makefile.am:
	* gui/simple-greeter/cutnpaste/fixedtip.c: (button_press_handler),
	(expose_handler), (na_fixed_tip_class_init), (na_fixed_tip_init),
	(na_fixed_tip_position), (na_fixed_tip_parent_size_allocated),
	(na_fixed_tip_parent_screen_changed), (na_fixed_tip_new),
	(na_fixed_tip_set_markup), (na_fixed_tip_set_orientation):
	* gui/simple-greeter/cutnpaste/fixedtip.h:
	* gui/simple-greeter/cutnpaste/na-marshal.list:
	* gui/simple-greeter/cutnpaste/na-tray-manager.c:
	(na_tray_manager_init), (na_tray_manager_class_init),
	(na_tray_manager_finalize), (na_tray_manager_set_property),
	(na_tray_manager_get_property), (na_tray_manager_new),
	(na_tray_manager_plug_removed),
	(na_tray_manager_make_socket_transparent),
	(na_tray_manager_socket_exposed),
	(na_tray_manager_socket_style_set),
	(na_tray_manager_handle_dock_request), (pending_message_free),
	(na_tray_manager_handle_client_message_message_data),
	(na_tray_manager_handle_begin_message),
	(na_tray_manager_handle_cancel_message),
	(na_tray_manager_handle_client_message_opcode),
	(na_tray_manager_window_filter),
	(na_tray_manager_selection_clear_event),
	(na_tray_manager_unmanage),
	(na_tray_manager_set_orientation_property),
	(na_tray_manager_manage_screen_x11),
	(na_tray_manager_manage_screen),
	(na_tray_manager_check_running_screen_x11),
	(na_tray_manager_check_running), (na_tray_manager_get_child_title),
	(na_tray_manager_set_orientation),
	(na_tray_manager_get_orientation):
	* gui/simple-greeter/cutnpaste/na-tray-manager.h:
	* gui/simple-greeter/cutnpaste/na-tray.c: (get_tray), (tray_added),
	(tray_removed), (icon_tip_buffer_free), (icon_tip_free),
	(icon_tip_buffer_compare), (icon_tip_show_next_clicked),
	(icon_tip_show_next_timeout), (icon_tip_show_next), (message_sent),
	(message_cancelled), (update_orientation_for_messages),
	(update_size_and_orientation), (na_tray_init),
	(na_tray_constructor), (na_tray_dispose), (na_tray_set_property),
	(na_tray_size_request), (na_tray_size_allocate),
	(na_tray_class_init), (na_tray_new_for_screen),
	(na_tray_set_orientation), (na_tray_get_orientation),
	(idle_redraw_cb), (na_tray_force_redraw):
	* gui/simple-greeter/cutnpaste/na-tray.h:
	* gui/simple-greeter/cutnpaste/obox.c: (na_obox_class_init),
	(na_obox_init), (na_obox_new), (get_class), (na_obox_size_request),
	(na_obox_size_allocate), (na_obox_set_orientation):
	* gui/simple-greeter/cutnpaste/obox.h:
	* gui/simple-greeter/cutnpaste/testtray.c: (do_add),
	(update_child_count), (tray_added_cb), (tray_removed_cb),
	(orientation_changed_cb), (maybe_quit),
	(warning_dialog_response_cb), (add_tray_cb),
	(create_tray_on_screen), (main):
	* gui/simple-greeter/gdm-greeter-panel.c:
	(gdm_greeter_panel_set_property), (gdm_greeter_panel_get_property),
	(gdm_greeter_panel_constructor), (gdm_greeter_panel_dispose),
	(gdm_greeter_panel_move_resize_window), (on_screen_size_changed),
	(gdm_greeter_panel_real_realize),
	(gdm_greeter_panel_real_unrealize), (get_outside_region),
	(get_monitor_geometry), (set_struts), (update_struts),
	(update_geometry), (gdm_greeter_panel_real_size_request),
	(gdm_greeter_panel_class_init), (gdm_greeter_panel_init),
	(gdm_greeter_panel_finalize), (gdm_greeter_panel_new):
	* gui/simple-greeter/gdm-greeter-panel.h:
	* gui/simple-greeter/gdm-simple-greeter.c: (set_sensitive),
	(set_message), (create_greeter), (create_panel),
	(gdm_simple_greeter_constructor):
	* gui/simple-greeter/gdm-simple-greeter.glade:
	* gui/simple-greeter/greeter-main.c: (get_display_id):
	* gui/simple-greeter/test-greeter-panel.c: (main):
	Add a greeter panel bar with an embedded notification area.

2007-09-05  William Jon McCann  <mccann@jhu.edu>

	* daemon/gdm-factory-slave.c: (run_greeter):
	* daemon/gdm-greeter-server.c: (handle_disconnect),
	(handle_get_display_id), (greeter_handle_child_message),
	(do_introspect), (_gdm_greeter_server_set_display_id),
	(gdm_greeter_server_set_property),
	(gdm_greeter_server_get_property), (gdm_greeter_server_class_init),
	(gdm_greeter_server_new):
	* daemon/gdm-greeter-server.h:
	* daemon/gdm-simple-slave.c: (run_greeter),
	(gdm_simple_slave_stop):
	* daemon/gdm-slave.c: (gdm_slave_finalize):
	* gui/simple-greeter/gdm-simple-greeter.c:
	(suspend_button_clicked), (gdm_simple_greeter_new):
	* gui/simple-greeter/gdm-simple-greeter.h:
	* gui/simple-greeter/greeter-main.c: (on_select_hostname),
	(on_disconnected), (get_display_id), (main):
	* libgreeter/gdm-greeter.c: (gdm_greeter_display_is_local),
	(gdm_greeter_emit_disconnected), (_gdm_greeter_set_display_id),
	(gdm_greeter_set_property), (gdm_greeter_get_property),
	(cache_display_values), (gdm_greeter_constructor),
	(gdm_greeter_class_init), (gdm_greeter_finalize):
	* libgreeter/gdm-greeter.h:
	Add SelectHostname, Disconnected, and GetDisplayId methods
	to the greeter server interface.

2007-09-05  William Jon McCann  <mccann@jhu.edu>

	* daemon/gdm-greeter-server.c: (handle_select_hostname),
	(greeter_handle_child_message), (do_introspect),
	(gdm_greeter_server_class_init):
	* daemon/gdm-greeter-server.h:
	Add SelectHostname to greeter interface.  For use
	with xdmcp host choosers.

2007-09-04  William Jon McCann  <mccann@jhu.edu>

	* daemon/gdm-session-worker.c (gdm_session_worker_verify_user):
	Don't print null strings - solaris crashes.
	Patch from Brian Cameron <brian.cameron@sun.com>

2007-09-04  William Jon McCann  <mccann@jhu.edu>

	* common/gdm-address.c: (gdm_address_peek_local_list):
	* daemon/gdm-xdmcp-display-factory.c: (do_bind),
	(gdm_xdmcp_send_failed):
	* gui/simple-chooser/chooser-main.c: (main):
	* gui/simple-chooser/gdm-host-chooser-widget.c: (chooser_host_add),
	(chooser_host_remove), (chooser_host_free), (find_known_host),
	(browser_add_host), (decode_packet), (do_ping), (xdmcp_discover),
	(find_broadcast_addresses), (add_hosts), (xdmcp_init),
	(gdm_host_chooser_widget_get_current_hostname),
	(gdm_host_chooser_widget_dispose),
	(gdm_host_chooser_widget_class_init), (on_host_selected),
	(on_row_activated), (gdm_host_chooser_widget_init):
	* gui/simple-chooser/gdm-host-chooser-widget.h:
	Make the chooser kinda work.

2007-08-31  William Jon McCann  <mccann@jhu.edu>

	* gui/simple-chooser/Makefile.am:
	* gui/simple-chooser/gdm-host-chooser-widget.c: (decode_packet),
	(do_ping), (ping_try), (xdmcp_discover), (xdmcp_init),
	(gdm_host_chooser_widget_init):
	A bit more stuff for the chooser

2007-08-31  William Jon McCann  <mccann@jhu.edu>

	* daemon/gdm-greeter-server.c: (generate_address):
	* daemon/gdm-session-relay.c: (generate_address):
	* daemon/gdm-session.c: (generate_address):
	Remove subdirectory in dbus socket tmpdir.

2007-08-31  William Jon McCann  <mccann@jhu.edu>

	* configure.ac:
	* daemon/gdm-server.c: (gdm_server_init):
	Use X_SERVER define instead of hardcoding xorg.
	Patch from Brian Cameron <brian.cameron@sun.com>

2007-08-30  William Jon McCann  <mccann@jhu.edu>

	* configure.ac:
	* gui/Makefile.am:
	* gui/simple-chooser/Makefile.am:
	* gui/simple-chooser/chooser-main.c: (main):
	* gui/simple-chooser/gdm-host-chooser-dialog.c:
	(gdm_host_chooser_dialog_get_current_hostname),
	(gdm_host_chooser_dialog_set_property),
	(gdm_host_chooser_dialog_get_property),
	(gdm_host_chooser_dialog_constructor),
	(gdm_host_chooser_dialog_dispose),
	(gdm_host_chooser_dialog_class_init), (on_response),
	(gdm_host_chooser_dialog_init), (gdm_host_chooser_dialog_finalize),
	(gdm_host_chooser_dialog_new):
	* gui/simple-chooser/gdm-host-chooser-dialog.h:
	* gui/simple-chooser/gdm-host-chooser-widget.c:
	(gdm_host_chooser_widget_refresh),
	(gdm_host_chooser_widget_get_current_hostname),
	(gdm_host_chooser_widget_set_property),
	(gdm_host_chooser_widget_get_property),
	(gdm_host_chooser_widget_constructor),
	(gdm_host_chooser_widget_dispose),
	(gdm_host_chooser_widget_class_init), (on_row_activated),
	(gdm_host_chooser_widget_init), (gdm_host_chooser_widget_finalize),
	(gdm_host_chooser_widget_new):
	* gui/simple-chooser/gdm-host-chooser-widget.h:
	* libgreeter/gdm-greeter.h:
	Add skeleton for chooser.

2007-08-29  William Jon McCann  <mccann@jhu.edu>

	* daemon/gdm-local-display-factory.c:
	(create_displays_for_pci_devices):
	* daemon/test-hal-seats.c: (get_pci_seats):
	Initialize and free error in loop.

2007-08-28  William Jon McCann  <mccann@jhu.edu>

	* common/gdm-address.c:
	* common/gdm-address.h:
	* common/gdm-common.c:
	* common/gdm-common.h:
	* common/gdm-log.c:
	* common/gdm-log.h:
	* common/gdm-md5.c:
	* common/gdm-md5.h:
	* common/gdm-settings-backend.c:
	* common/gdm-settings-backend.h:
	* common/gdm-settings-client.c:
	* common/gdm-settings-client.h:
	* common/gdm-settings-desktop-backend.c:
	* common/gdm-settings-desktop-backend.h:
	* common/gdm-settings-direct.c:
	* common/gdm-settings-direct.h:
	* common/gdm-settings-keys.h:
	* common/gdm-settings-utils.c:
	* common/gdm-settings-utils.h:
	* common/gdm-settings.c:
	* common/gdm-settings.h:
	* common/gdm-signal-handler.c:
	* common/gdm-signal-handler.h:
	* common/ve-signal.c:
	* common/ve-signal.h:
	* daemon/auth.c:
	* daemon/choose.c:
	* daemon/choose.h:
	* daemon/factory-slave-main.c:
	* daemon/filecheck.c:
	* daemon/gdm-display-factory.c:
	* daemon/gdm-display-factory.h:
	* daemon/gdm-display-store.c:
	* daemon/gdm-display-store.h:
	* daemon/gdm-display.c:
	* daemon/gdm-display.h:
	* daemon/gdm-factory-slave.c:
	* daemon/gdm-factory-slave.h:
	* daemon/gdm-greeter-proxy.c:
	* daemon/gdm-greeter-proxy.h:
	* daemon/gdm-greeter-server.c:
	* daemon/gdm-greeter-server.h:
	* daemon/gdm-local-display-factory.c:
	* daemon/gdm-local-display-factory.h:
	* daemon/gdm-manager.c:
	* daemon/gdm-manager.h:
	* daemon/gdm-product-display.c:
	* daemon/gdm-product-display.h:
	* daemon/gdm-product-slave.c:
	* daemon/gdm-product-slave.h:
	* daemon/gdm-server.c:
	* daemon/gdm-server.h:
	* daemon/gdm-session-relay.c:
	* daemon/gdm-session-relay.h:
	* daemon/gdm-session-worker-job.c:
	* daemon/gdm-session-worker-job.h:
	* daemon/gdm-session-worker.c:
	* daemon/gdm-session-worker.h:
	* daemon/gdm-session.c:
	* daemon/gdm-session.h:
	* daemon/gdm-simple-slave.c:
	* daemon/gdm-simple-slave.h:
	* daemon/gdm-slave-proxy.c:
	* daemon/gdm-slave-proxy.h:
	* daemon/gdm-slave.c:
	* daemon/gdm-slave.h:
	* daemon/gdm-static-display.c:
	* daemon/gdm-static-display.h:
	* daemon/gdm-static-factory-display.c:
	* daemon/gdm-static-factory-display.h:
	* daemon/gdm-xdmcp-display-factory.c:
	* daemon/gdm-xdmcp-display-factory.h:
	* daemon/gdm-xdmcp-display.c:
	* daemon/gdm-xdmcp-display.h:
	* daemon/main.c:
	* daemon/product-slave-main.c:
	* daemon/session-worker-main.c:
	* daemon/simple-slave-main.c:
	* daemon/test-hal-seats.c:
	* daemon/test-session.c:
	* gui/simple-greeter/gdm-simple-greeter.c:
	* gui/simple-greeter/gdm-simple-greeter.h:
	* gui/simple-greeter/greeter-main.c:
	* libgreeter/gdm-greeter.c:
	* libgreeter/gdm-greeter.h:
	* libgreeter/gdmlanguages.c:
	* libgreeter/gdmsession.c:
	Mass change tabs to spaces.  Tabs suck.

2007-08-28  William Jon McCann  <mccann@jhu.edu>

	* daemon/gdm-factory-slave.c: (on_greeter_answer):
	* daemon/gdm-greeter-server.c: (handle_answer_query):
	* daemon/gdm-product-slave.c: (on_relay_answer):
	* daemon/gdm-session-relay.c: (gdm_session_relay_answer_query):
	* daemon/gdm-session-worker.c:
	(gdm_session_worker_pam_new_messages_handler):
	* gui/simple-greeter/greeter-main.c: (on_query_answer):
	Don't echo authentication responses.

2007-08-23  William Jon McCann  <mccann@jhu.edu>

	* daemon/gdm-display.c: (_gdm_display_set_seat_id),
	(gdm_display_set_property), (gdm_display_get_property),
	(gdm_display_class_init), (gdm_display_finalize):
	Add seat-id property.

2007-08-23  William Jon McCann  <mccann@jhu.edu>

	* configure.ac:
	Add libresolv to EXTRA_DAEMON_LIBS on Solaris
	Patch from Brian Cameron <brian.cameron@sun.com>

2007-08-22  William Jon McCann  <mccann@jhu.edu>

	* daemon/INTERNALS:
	Add some basic descriptions of some internals.

2007-08-22  William Jon McCann  <mccann@jhu.edu>

	* daemon/getvt.c:
	* daemon/getvt.h:
	* daemon/test-hal-seats.c:
	Remove getvt stuff.  Add little hal test tool.

2007-08-22  William Jon McCann  <mccann@jhu.edu>

	* daemon/gdm-factory-slave.c: (run_greeter):
	* daemon/gdm-product-slave.c: (setup_server):
	* daemon/gdm-simple-slave.c: (run_greeter):
	Remove tsol_init stuff for now

2007-08-22  William Jon McCann  <mccann@jhu.edu>

	* configure.ac:
	* daemon/gdm-session-worker.c:
	(gdm_session_worker_give_user_credentials):
	Add support for non POSIX getpwnam_r

2007-08-21  William Jon McCann  <mccann@jhu.edu>

	* daemon/gdm-display-factory.c:
	* daemon/gdm-factory-slave.c:
	* daemon/gdm-product-slave.c: (on_session_started):
	* daemon/gdm-xdmcp-display-factory.c:
	Remove unused signals variable.

2007-08-21  William Jon McCann  <mccann@jhu.edu>

	* daemon/test-session.c: (on_secret_info_query):
	Convert termio to termios stuff.

2007-08-21  William Jon McCann  <mccann@jhu.edu>

	* acconfig.h:
	* acinclude.m4:
	* common/gdm-address.c:
	* configure.ac:
	* daemon/Makefile.am:
	* daemon/factory-slave-main.c:
	* daemon/gdm-server.c: (server_child_setup):
	* daemon/main.c: (main):
	* daemon/product-slave-main.c:
	* daemon/session-worker-main.c:
	* daemon/simple-slave-main.c:
	* daemon/test-session.c: (on_secret_info_query):
	Some Solaris build fixes.
	Patch from Brian Cameron <brian.cameron@sun.com>

2007-08-03  William Jon McCann  <mccann@jhu.edu>

	* daemon/gdm-display-factory.c: (gdm_display_factory_start),
	(gdm_display_factory_stop):
	* daemon/gdm-display-factory.h:
	* daemon/gdm-local-display-factory.c:
	(gdm_local_display_factory_start),
	(gdm_local_display_factory_stop),
	(gdm_local_display_factory_class_init):
	* daemon/gdm-local-display-factory.h:
	* daemon/gdm-manager.c: (gdm_manager_start),
	(gdm_manager_set_wait_for_go):
	* daemon/gdm-xdmcp-display-factory.c:
	(gdm_xdmcp_display_factory_start),
	(gdm_xdmcp_display_factory_stop),
	(gdm_xdmcp_display_factory_class_init):
	* daemon/gdm-xdmcp-display-factory.h:
	Fix up inheritance.

2007-08-03  William Jon McCann  <mccann@jhu.edu>

	* daemon/Makefile.am:
	* daemon/gdm-display-factory.c: (gdm_display_factory_error_quark),
	(gdm_display_factory_get_display_store),
	(gdm_display_factory_start), (gdm_display_factory_stop),
	(gdm_display_factory_set_display_store),
	(gdm_display_factory_set_property),
	(gdm_display_factory_get_property),
	(gdm_display_factory_class_init), (gdm_display_factory_init),
	(gdm_display_factory_finalize):
	* daemon/gdm-display-factory.h:
	* daemon/gdm-local-display-factory.c: (create_display_for_device),
	(create_displays_for_pci_devices),
	(gdm_local_display_factory_start),
	(gdm_local_display_factory_set_property),
	(gdm_local_display_factory_get_property),
	(gdm_local_display_factory_class_init):
	* daemon/gdm-local-display-factory.h:
	* daemon/gdm-manager.c: (gdm_manager_start),
	(gdm_manager_set_wait_for_go), (gdm_manager_constructor),
	(gdm_manager_finalize):
	* daemon/gdm-xdmcp-display-factory.c:
	(gdm_xdmcp_display_factory_error_quark), (get_next_session_serial),
	(setup_multicast), (open_port), (gdm_xdmcp_num_displays_from_host),
	(gdm_xdmcp_display_lookup_by_host), (get_willing_output),
	(gdm_xdmcp_send_willing), (gdm_xdmcp_send_unwilling),
	(gdm_xdmcp_send_forward_query), (handle_any_query),
	(handle_direct_query), (gdm_xdmcp_handle_broadcast_query),
	(gdm_xdmcp_handle_query), (gdm_xdmcp_handle_indirect_query),
	(gdm_forward_query_dispose), (remove_oldest_forward),
	(gdm_forward_query_alloc), (gdm_forward_query_lookup),
	(gdm_xdmcp_whack_queued_managed_forwards),
	(gdm_xdmcp_handle_forward_query),
	(gdm_xdmcp_really_send_managed_forward), (managed_forward_handler),
	(gdm_xdmcp_send_managed_forward),
	(gdm_xdmcp_send_got_managed_forward), (count_sessions),
	(gdm_xdmcp_recount_sessions), (purge_displays),
	(gdm_xdmcp_displays_purge), (display_dispose_check),
	(gdm_xdmcp_send_decline), (gdm_xdmcp_display_alloc),
	(gdm_xdmcp_send_accept), (gdm_xdmcp_handle_request),
	(gdm_xdmcp_display_lookup), (gdm_xdmcp_send_failed),
	(gdm_xdmcp_send_refuse), (gdm_xdmcp_handle_manage),
	(gdm_xdmcp_handle_managed_forward),
	(gdm_xdmcp_handle_got_managed_forward), (gdm_xdmcp_send_alive),
	(gdm_xdmcp_handle_keepalive), (decode_packet),
	(gdm_xdmcp_display_factory_start),
	(gdm_xdmcp_display_factory_stop),
	(gdm_xdmcp_display_factory_set_port),
	(gdm_xdmcp_display_factory_set_use_multicast),
	(gdm_xdmcp_display_factory_set_multicast_address),
	(gdm_xdmcp_display_factory_set_honor_indirect),
	(gdm_xdmcp_display_factory_set_max_displays_per_host),
	(gdm_xdmcp_display_factory_set_max_displays),
	(gdm_xdmcp_display_factory_set_max_pending_displays),
	(gdm_xdmcp_display_factory_set_max_wait),
	(gdm_xdmcp_display_factory_set_willing_script),
	(gdm_xdmcp_display_factory_set_property),
	(gdm_xdmcp_display_factory_get_property),
	(gdm_xdmcp_display_factory_class_init),
	(gdm_xdmcp_display_factory_init),
	(gdm_xdmcp_display_factory_finalize),
	(gdm_xdmcp_display_factory_new):
	* daemon/gdm-xdmcp-display-factory.h:
	* daemon/gdm-xdmcp-manager.c:
	* daemon/gdm-xdmcp-manager.h:
	Add an abstract base class for display factories.  Rename
	gdm-xdmcp-manager to gdm-xdmcp-display-factory.

2007-08-02  William Jon McCann  <mccann@jhu.edu>

	* daemon/Makefile.am:
	* daemon/gdm-local-display-factory.c:
	(gdm_local_display_factory_error_quark), (get_pci_seat_devices),
	(gdm_local_display_factory_start),
	(gdm_local_display_factory_stop),
	(gdm_local_display_factory_set_display_store),
	(gdm_local_display_factory_set_property),
	(gdm_local_display_factory_get_property),
	(gdm_local_display_factory_class_init), (connect_to_hal),
	(disconnect_from_hal), (gdm_local_display_factory_init),
	(gdm_local_display_factory_finalize),
	(gdm_local_display_factory_new):
	* daemon/gdm-local-display-factory.h:
	* daemon/gdm-manager.c: (gdm_manager_start),
	(gdm_manager_set_wait_for_go), (gdm_manager_constructor):
	Add new object that will monitor HAL and act as a factory
	for displays.

2007-08-01  William Jon McCann  <mccann@jhu.edu>

	* daemon/gdm-session-worker.c: (open_idle), (free_open_data),
	(queue_open), (on_begin_verification),
	(on_begin_verification_for_user):
	* daemon/gdm-session.c: (gdm_session_handle_verification_failed):
	* daemon/gdm-simple-slave.c: (greeter_reset_timeout),
	(queue_greeter_reset), (on_user_verification_error):
	* gui/simple-greeter/gdm-simple-greeter.c: (set_message),
	(do_cancel), (reset_dialog), (gdm_simple_greeter_reset),
	(gdm_simple_greeter_info), (gdm_simple_greeter_problem),
	(gdm_simple_greeter_info_query),
	(gdm_simple_greeter_secret_info_query), (cancel_button_clicked):
	* gui/simple-greeter/gdm-simple-greeter.glade:
	Report errors to the greeter.  Reset greeter after errors.
	Open the session in an idle.

2007-08-01  William Jon McCann  <mccann@jhu.edu>

	* gui/simple-greeter/gdm-simple-greeter.c: (set_busy), (set_ready),
	(set_sensitive), (reset_dialog), (gdm_simple_greeter_info_query),
	(gdm_simple_greeter_secret_info_query), (ok_button_clicked),
	(cancel_button_clicked), (create_greeter):
	* gui/simple-greeter/gdm-simple-greeter.glade:
	Change sensitivity and cursor when waiting.

2007-08-01  William Jon McCann  <mccann@jhu.edu>

	* daemon/gdm-session.c: (answer_pending_query):
	* daemon/gdm-simple-slave.c: (create_new_session),
	(on_greeter_cancel):
	Reopen the session after the greeter is cancelled.

2007-08-01  William Jon McCann  <mccann@jhu.edu>

	* daemon/Makefile.am:
	* daemon/ck-connector.c: (lookup_parameter_type),
	(add_param_basic), (_ck_connector_free), (ck_connector_unref),
	(ck_connector_ref), (ck_connector_new),
	(ck_connector_open_session),
	(ck_connector_open_session_with_parameters_valist),
	(ck_connector_open_session_with_parameters),
	(ck_connector_open_session_for_user), (ck_connector_get_cookie),
	(ck_connector_close_session):
	* daemon/ck-connector.h:
	* daemon/gdm-ck-session.c:
	* daemon/gdm-ck-session.h:
	* daemon/gdm-factory-slave.c: (run_greeter):
	* daemon/gdm-greeter-proxy.c: (open_greeter_session),
	(close_greeter_session), (get_greeter_environment),
	(greeter_proxy_child_watch), (gdm_greeter_proxy_spawn),
	(gdm_greeter_proxy_stop),
	(_gdm_greeter_proxy_set_x11_display_hostname),
	(_gdm_greeter_proxy_set_x11_display_is_local),
	(gdm_greeter_proxy_set_property), (gdm_greeter_proxy_get_property),
	(gdm_greeter_proxy_class_init), (gdm_greeter_proxy_init),
	(gdm_greeter_proxy_finalize), (gdm_greeter_proxy_new):
	* daemon/gdm-greeter-proxy.h:
	* daemon/gdm-simple-slave.c: (slave_open_ck_session),
	(setup_session_environment), (run_greeter):
	Make ConsoleKit session registration more robust and complete.

2007-07-26  William Jon McCann  <mccann@jhu.edu>

	* daemon/gdm-greeter-proxy.c: (close_greeter_session),
	(greeter_proxy_child_watch), (gdm_greeter_proxy_stop):
	Close greeter ConsoleKit session.

2007-07-26  William Jon McCann  <mccann@jhu.edu>

	* daemon/gdm-ck-session.c: (open_ck_session), (close_ck_session):
	* daemon/gdm-ck-session.h:
	* daemon/gdm-greeter-proxy.c: (open_greeter_session),
	(gdm_greeter_proxy_spawn):
	* daemon/gdm-simple-slave.c: (slave_open_ck_session),
	(setup_session_environment), (gdm_simple_slave_init):
	Register user session with ConsoleKit.

2007-07-25  William Jon McCann  <mccann@jhu.edu>

	* common/gdm-address.c: (gdm_address_get_hostname),
	(gdm_address_get_numeric_info), (address_family_str),
	(gdm_address_debug):
	* common/gdm-address.h:
	* daemon/Makefile.am:
	* daemon/auth.c: (gdm_auth_add_entry),
	(gdm_auth_add_entry_for_display), (gdm_auth_user_add):
	* daemon/auth.h:
	* daemon/gdm-ck-session.c: (unlock_ck_session):
	* daemon/gdm-display.c: (gdm_display_real_add_user_authorization),
	(gdm_display_add_user_authorization),
	(gdm_display_real_remove_user_authorization),
	(gdm_display_remove_user_authorization),
	(gdm_display_get_x11_display_number),
	(gdm_display_get_x11_display_name),
	(_gdm_display_set_x11_display_number),
	(_gdm_display_set_x11_display_name), (gdm_display_set_property),
	(gdm_display_get_property), (gdm_display_class_init):
	* daemon/gdm-display.h:
	* daemon/gdm-display.xml:
	* daemon/gdm-factory-slave.c: (run_greeter):
	* daemon/gdm-greeter-proxy.c: (listify_hash):
	* daemon/gdm-product-display.c:
	(gdm_product_display_add_user_authorization),
	(gdm_product_display_remove_user_authorization),
	(gdm_product_display_class_init), (gdm_product_display_new):
	* daemon/gdm-simple-slave.c: (listify_hash),
	(get_script_environment), (add_user_authorization),
	(setup_session_environment), (run_greeter),
	(gdm_simple_slave_init):
	* daemon/gdm-slave.c: (gdm_slave_real_start),
	(gdm_slave_add_user_authorization),
	(_gdm_slave_set_display_number), (gdm_slave_set_property),
	(gdm_slave_get_property), (gdm_slave_class_init):
	* daemon/gdm-slave.h:
	* daemon/gdm-static-display.c:
	(gdm_static_display_add_user_authorization),
	(gdm_static_display_remove_user_authorization),
	(gdm_static_display_class_init), (gdm_static_display_new):
	* daemon/gdm-static-factory-display.c:
	(gdm_static_factory_display_add_user_authorization),
	(gdm_static_factory_display_remove_user_authorization),
	(gdm_static_factory_display_class_init),
	(gdm_static_factory_display_new):
	* daemon/gdm-xdmcp-display.c: (gdm_xdmcp_display_create_authority),
	(gdm_xdmcp_display_add_user_authorization),
	(gdm_xdmcp_display_remove_user_authorization),
	(_gdm_xdmcp_display_set_remote_address),
	(gdm_xdmcp_display_set_property), (gdm_xdmcp_display_class_init),
	(gdm_xdmcp_display_new):
	* daemon/gdm-xdmcp-manager.c: (do_bind), (gdm_xdmcp_host_allow),
	(lookup_by_host), (gdm_xdmcp_send_willing),
	(gdm_xdmcp_send_unwilling), (gdm_xdmcp_send_forward_query),
	(gdm_forward_query_dispose), (gdm_forward_query_lookup),
	(gdm_xdmcp_handle_forward_query),
	(gdm_xdmcp_really_send_managed_forward),
	(gdm_xdmcp_send_got_managed_forward), (remove_host),
	(gdm_xdmcp_send_decline), (gdm_xdmcp_display_alloc),
	(gdm_xdmcp_send_accept), (gdm_xdmcp_handle_request),
	(gdm_xdmcp_handle_manage), (gdm_xdmcp_handle_managed_forward),
	(gdm_xdmcp_handle_got_managed_forward),
	(gdm_xdmcp_handle_keepalive), (decode_packet):
	* data/gdm.conf:
	* gui/simple-greeter/greeter-main.c: (main):
	Make XDMCP logins work.

2007-07-24  William Jon McCann  <mccann@jhu.edu>

	* daemon/gdm-display.c: (finish_idle), (queue_finish),
	(slave_exited), (slave_died), (gdm_display_manage),
	(gdm_display_real_finish), (gdm_display_finish),
	(gdm_display_dispose), (gdm_display_class_init):
	* daemon/gdm-display.h:
	* daemon/gdm-manager.c: (load_static_displays_from_file):
	* daemon/gdm-product-display.c: (gdm_product_display_finish),
	(gdm_product_display_class_init):
	* daemon/gdm-simple-slave.c: (on_session_exited),
	(on_session_died), (on_opened), (create_new_session),
	(on_greeter_start), (on_greeter_stop), (on_greeter_user_selected),
	(on_greeter_cancel), (on_greeter_connected), (run_greeter),
	(gdm_simple_slave_finalize):
	* daemon/gdm-slave-proxy.c: (child_watch),
	(gdm_slave_proxy_dispose), (gdm_slave_proxy_class_init):
	* daemon/gdm-static-display.c: (gdm_static_display_finish),
	(gdm_static_display_class_init):
	* daemon/gdm-static-factory-display.c:
	(gdm_static_factory_display_finish),
	(gdm_static_factory_display_class_init):
	Dogfood static display.  Make static display work.  Add a finished
	state to the Display.  Always restart static displays on finish.

2007-07-22  Richard Hughes  <richard@hughsie.com>

	* common/Makefile.am:
	* daemon/Makefile.am:
	* data/Makefile.am:
	* gui/simple-greeter/Makefile.am:
	* libgreeter/Makefile.am:
	* po/POTFILES.in:
	* po/POTFILES.skip:
	* utils/Makefile.am:
	Fix make distcheck.

