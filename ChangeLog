2007-08-23  William Jon McCann  <mccann@jhu.edu>

	* configure.ac:
	Add libresolv to EXTRA_DAEMON_LIBS on Solaris
	Patch from Brian Cameron <brian.cameron@sun.com>

2007-08-22  William Jon McCann  <mccann@jhu.edu>

	* daemon/INTERNALS:
	Add some basic descriptions of some internals.

2007-08-22  William Jon McCann  <mccann@jhu.edu>

	* daemon/getvt.c:
	* daemon/getvt.h:
	* daemon/test-hal-seats.c:
	Remove getvt stuff.  Add little hal test tool.

2007-08-22  William Jon McCann  <mccann@jhu.edu>

	* daemon/gdm-factory-slave.c: (run_greeter):
	* daemon/gdm-product-slave.c: (setup_server):
	* daemon/gdm-simple-slave.c: (run_greeter):
	Remove tsol_init stuff for now

2007-08-22  William Jon McCann  <mccann@jhu.edu>

	* configure.ac:
	* daemon/gdm-session-worker.c:
	(gdm_session_worker_give_user_credentials):
	Add support for non POSIX getpwnam_r

2007-08-21  William Jon McCann  <mccann@jhu.edu>

	* daemon/gdm-display-factory.c:
	* daemon/gdm-factory-slave.c:
	* daemon/gdm-product-slave.c: (on_session_started):
	* daemon/gdm-xdmcp-display-factory.c:
	Remove unused signals variable.

2007-08-21  William Jon McCann  <mccann@jhu.edu>

	* daemon/test-session.c: (on_secret_info_query):
	Convert termio to termios stuff.

2007-08-21  William Jon McCann  <mccann@jhu.edu>

	* acconfig.h:
	* acinclude.m4:
	* common/gdm-address.c:
	* configure.ac:
	* daemon/Makefile.am:
	* daemon/factory-slave-main.c:
	* daemon/gdm-server.c: (server_child_setup):
	* daemon/main.c: (main):
	* daemon/product-slave-main.c:
	* daemon/session-worker-main.c:
	* daemon/simple-slave-main.c:
	* daemon/test-session.c: (on_secret_info_query):
	Some Solaris build fixes.
	Patch from Brian Cameron <brian.cameron@sun.com>

2007-08-03  William Jon McCann  <mccann@jhu.edu>

	* daemon/gdm-display-factory.c: (gdm_display_factory_start),
	(gdm_display_factory_stop):
	* daemon/gdm-display-factory.h:
	* daemon/gdm-local-display-factory.c:
	(gdm_local_display_factory_start),
	(gdm_local_display_factory_stop),
	(gdm_local_display_factory_class_init):
	* daemon/gdm-local-display-factory.h:
	* daemon/gdm-manager.c: (gdm_manager_start),
	(gdm_manager_set_wait_for_go):
	* daemon/gdm-xdmcp-display-factory.c:
	(gdm_xdmcp_display_factory_start),
	(gdm_xdmcp_display_factory_stop),
	(gdm_xdmcp_display_factory_class_init):
	* daemon/gdm-xdmcp-display-factory.h:
	Fix up inheritance.

2007-08-03  William Jon McCann  <mccann@jhu.edu>

	* daemon/Makefile.am:
	* daemon/gdm-display-factory.c: (gdm_display_factory_error_quark),
	(gdm_display_factory_get_display_store),
	(gdm_display_factory_start), (gdm_display_factory_stop),
	(gdm_display_factory_set_display_store),
	(gdm_display_factory_set_property),
	(gdm_display_factory_get_property),
	(gdm_display_factory_class_init), (gdm_display_factory_init),
	(gdm_display_factory_finalize):
	* daemon/gdm-display-factory.h:
	* daemon/gdm-local-display-factory.c: (create_display_for_device),
	(create_displays_for_pci_devices),
	(gdm_local_display_factory_start),
	(gdm_local_display_factory_set_property),
	(gdm_local_display_factory_get_property),
	(gdm_local_display_factory_class_init):
	* daemon/gdm-local-display-factory.h:
	* daemon/gdm-manager.c: (gdm_manager_start),
	(gdm_manager_set_wait_for_go), (gdm_manager_constructor),
	(gdm_manager_finalize):
	* daemon/gdm-xdmcp-display-factory.c:
	(gdm_xdmcp_display_factory_error_quark), (get_next_session_serial),
	(setup_multicast), (open_port), (gdm_xdmcp_num_displays_from_host),
	(gdm_xdmcp_display_lookup_by_host), (get_willing_output),
	(gdm_xdmcp_send_willing), (gdm_xdmcp_send_unwilling),
	(gdm_xdmcp_send_forward_query), (handle_any_query),
	(handle_direct_query), (gdm_xdmcp_handle_broadcast_query),
	(gdm_xdmcp_handle_query), (gdm_xdmcp_handle_indirect_query),
	(gdm_forward_query_dispose), (remove_oldest_forward),
	(gdm_forward_query_alloc), (gdm_forward_query_lookup),
	(gdm_xdmcp_whack_queued_managed_forwards),
	(gdm_xdmcp_handle_forward_query),
	(gdm_xdmcp_really_send_managed_forward), (managed_forward_handler),
	(gdm_xdmcp_send_managed_forward),
	(gdm_xdmcp_send_got_managed_forward), (count_sessions),
	(gdm_xdmcp_recount_sessions), (purge_displays),
	(gdm_xdmcp_displays_purge), (display_dispose_check),
	(gdm_xdmcp_send_decline), (gdm_xdmcp_display_alloc),
	(gdm_xdmcp_send_accept), (gdm_xdmcp_handle_request),
	(gdm_xdmcp_display_lookup), (gdm_xdmcp_send_failed),
	(gdm_xdmcp_send_refuse), (gdm_xdmcp_handle_manage),
	(gdm_xdmcp_handle_managed_forward),
	(gdm_xdmcp_handle_got_managed_forward), (gdm_xdmcp_send_alive),
	(gdm_xdmcp_handle_keepalive), (decode_packet),
	(gdm_xdmcp_display_factory_start),
	(gdm_xdmcp_display_factory_stop),
	(gdm_xdmcp_display_factory_set_port),
	(gdm_xdmcp_display_factory_set_use_multicast),
	(gdm_xdmcp_display_factory_set_multicast_address),
	(gdm_xdmcp_display_factory_set_honor_indirect),
	(gdm_xdmcp_display_factory_set_max_displays_per_host),
	(gdm_xdmcp_display_factory_set_max_displays),
	(gdm_xdmcp_display_factory_set_max_pending_displays),
	(gdm_xdmcp_display_factory_set_max_wait),
	(gdm_xdmcp_display_factory_set_willing_script),
	(gdm_xdmcp_display_factory_set_property),
	(gdm_xdmcp_display_factory_get_property),
	(gdm_xdmcp_display_factory_class_init),
	(gdm_xdmcp_display_factory_init),
	(gdm_xdmcp_display_factory_finalize),
	(gdm_xdmcp_display_factory_new):
	* daemon/gdm-xdmcp-display-factory.h:
	* daemon/gdm-xdmcp-manager.c:
	* daemon/gdm-xdmcp-manager.h:
	Add an abstract base class for display factories.  Rename
	gdm-xdmcp-manager to gdm-xdmcp-display-factory.

2007-08-02  William Jon McCann  <mccann@jhu.edu>

	* daemon/Makefile.am:
	* daemon/gdm-local-display-factory.c:
	(gdm_local_display_factory_error_quark), (get_pci_seat_devices),
	(gdm_local_display_factory_start),
	(gdm_local_display_factory_stop),
	(gdm_local_display_factory_set_display_store),
	(gdm_local_display_factory_set_property),
	(gdm_local_display_factory_get_property),
	(gdm_local_display_factory_class_init), (connect_to_hal),
	(disconnect_from_hal), (gdm_local_display_factory_init),
	(gdm_local_display_factory_finalize),
	(gdm_local_display_factory_new):
	* daemon/gdm-local-display-factory.h:
	* daemon/gdm-manager.c: (gdm_manager_start),
	(gdm_manager_set_wait_for_go), (gdm_manager_constructor):
	Add new object that will monitor HAL and act as a factory
	for displays.

2007-08-01  William Jon McCann  <mccann@jhu.edu>

	* daemon/gdm-session-worker.c: (open_idle), (free_open_data),
	(queue_open), (on_begin_verification),
	(on_begin_verification_for_user):
	* daemon/gdm-session.c: (gdm_session_handle_verification_failed):
	* daemon/gdm-simple-slave.c: (greeter_reset_timeout),
	(queue_greeter_reset), (on_user_verification_error):
	* gui/simple-greeter/gdm-simple-greeter.c: (set_message),
	(do_cancel), (reset_dialog), (gdm_simple_greeter_reset),
	(gdm_simple_greeter_info), (gdm_simple_greeter_problem),
	(gdm_simple_greeter_info_query),
	(gdm_simple_greeter_secret_info_query), (cancel_button_clicked):
	* gui/simple-greeter/gdm-simple-greeter.glade:
	Report errors to the greeter.  Reset greeter after errors.
	Open the session in an idle.

2007-08-01  William Jon McCann  <mccann@jhu.edu>

	* gui/simple-greeter/gdm-simple-greeter.c: (set_busy), (set_ready),
	(set_sensitive), (reset_dialog), (gdm_simple_greeter_info_query),
	(gdm_simple_greeter_secret_info_query), (ok_button_clicked),
	(cancel_button_clicked), (create_greeter):
	* gui/simple-greeter/gdm-simple-greeter.glade:
	Change sensitivity and cursor when waiting.

2007-08-01  William Jon McCann  <mccann@jhu.edu>

	* daemon/gdm-session.c: (answer_pending_query):
	* daemon/gdm-simple-slave.c: (create_new_session),
	(on_greeter_cancel):
	Reopen the session after the greeter is cancelled.

2007-08-01  William Jon McCann  <mccann@jhu.edu>

	* daemon/Makefile.am:
	* daemon/ck-connector.c: (lookup_parameter_type),
	(add_param_basic), (_ck_connector_free), (ck_connector_unref),
	(ck_connector_ref), (ck_connector_new),
	(ck_connector_open_session),
	(ck_connector_open_session_with_parameters_valist),
	(ck_connector_open_session_with_parameters),
	(ck_connector_open_session_for_user), (ck_connector_get_cookie),
	(ck_connector_close_session):
	* daemon/ck-connector.h:
	* daemon/gdm-ck-session.c:
	* daemon/gdm-ck-session.h:
	* daemon/gdm-factory-slave.c: (run_greeter):
	* daemon/gdm-greeter-proxy.c: (open_greeter_session),
	(close_greeter_session), (get_greeter_environment),
	(greeter_proxy_child_watch), (gdm_greeter_proxy_spawn),
	(gdm_greeter_proxy_stop),
	(_gdm_greeter_proxy_set_x11_display_hostname),
	(_gdm_greeter_proxy_set_x11_display_is_local),
	(gdm_greeter_proxy_set_property), (gdm_greeter_proxy_get_property),
	(gdm_greeter_proxy_class_init), (gdm_greeter_proxy_init),
	(gdm_greeter_proxy_finalize), (gdm_greeter_proxy_new):
	* daemon/gdm-greeter-proxy.h:
	* daemon/gdm-simple-slave.c: (slave_open_ck_session),
	(setup_session_environment), (run_greeter):
	Make ConsoleKit session registration more robust and complete.

2007-07-26  William Jon McCann  <mccann@jhu.edu>

	* daemon/gdm-greeter-proxy.c: (close_greeter_session),
	(greeter_proxy_child_watch), (gdm_greeter_proxy_stop):
	Close greeter ConsoleKit session.

2007-07-26  William Jon McCann  <mccann@jhu.edu>

	* daemon/gdm-ck-session.c: (open_ck_session), (close_ck_session):
	* daemon/gdm-ck-session.h:
	* daemon/gdm-greeter-proxy.c: (open_greeter_session),
	(gdm_greeter_proxy_spawn):
	* daemon/gdm-simple-slave.c: (slave_open_ck_session),
	(setup_session_environment), (gdm_simple_slave_init):
	Register user session with ConsoleKit.

2007-07-25  William Jon McCann  <mccann@jhu.edu>

	* common/gdm-address.c: (gdm_address_get_hostname),
	(gdm_address_get_numeric_info), (address_family_str),
	(gdm_address_debug):
	* common/gdm-address.h:
	* daemon/Makefile.am:
	* daemon/auth.c: (gdm_auth_add_entry),
	(gdm_auth_add_entry_for_display), (gdm_auth_user_add):
	* daemon/auth.h:
	* daemon/gdm-ck-session.c: (unlock_ck_session):
	* daemon/gdm-display.c: (gdm_display_real_add_user_authorization),
	(gdm_display_add_user_authorization),
	(gdm_display_real_remove_user_authorization),
	(gdm_display_remove_user_authorization),
	(gdm_display_get_x11_display_number),
	(gdm_display_get_x11_display_name),
	(_gdm_display_set_x11_display_number),
	(_gdm_display_set_x11_display_name), (gdm_display_set_property),
	(gdm_display_get_property), (gdm_display_class_init):
	* daemon/gdm-display.h:
	* daemon/gdm-display.xml:
	* daemon/gdm-factory-slave.c: (run_greeter):
	* daemon/gdm-greeter-proxy.c: (listify_hash):
	* daemon/gdm-product-display.c:
	(gdm_product_display_add_user_authorization),
	(gdm_product_display_remove_user_authorization),
	(gdm_product_display_class_init), (gdm_product_display_new):
	* daemon/gdm-simple-slave.c: (listify_hash),
	(get_script_environment), (add_user_authorization),
	(setup_session_environment), (run_greeter),
	(gdm_simple_slave_init):
	* daemon/gdm-slave.c: (gdm_slave_real_start),
	(gdm_slave_add_user_authorization),
	(_gdm_slave_set_display_number), (gdm_slave_set_property),
	(gdm_slave_get_property), (gdm_slave_class_init):
	* daemon/gdm-slave.h:
	* daemon/gdm-static-display.c:
	(gdm_static_display_add_user_authorization),
	(gdm_static_display_remove_user_authorization),
	(gdm_static_display_class_init), (gdm_static_display_new):
	* daemon/gdm-static-factory-display.c:
	(gdm_static_factory_display_add_user_authorization),
	(gdm_static_factory_display_remove_user_authorization),
	(gdm_static_factory_display_class_init),
	(gdm_static_factory_display_new):
	* daemon/gdm-xdmcp-display.c: (gdm_xdmcp_display_create_authority),
	(gdm_xdmcp_display_add_user_authorization),
	(gdm_xdmcp_display_remove_user_authorization),
	(_gdm_xdmcp_display_set_remote_address),
	(gdm_xdmcp_display_set_property), (gdm_xdmcp_display_class_init),
	(gdm_xdmcp_display_new):
	* daemon/gdm-xdmcp-manager.c: (do_bind), (gdm_xdmcp_host_allow),
	(lookup_by_host), (gdm_xdmcp_send_willing),
	(gdm_xdmcp_send_unwilling), (gdm_xdmcp_send_forward_query),
	(gdm_forward_query_dispose), (gdm_forward_query_lookup),
	(gdm_xdmcp_handle_forward_query),
	(gdm_xdmcp_really_send_managed_forward),
	(gdm_xdmcp_send_got_managed_forward), (remove_host),
	(gdm_xdmcp_send_decline), (gdm_xdmcp_display_alloc),
	(gdm_xdmcp_send_accept), (gdm_xdmcp_handle_request),
	(gdm_xdmcp_handle_manage), (gdm_xdmcp_handle_managed_forward),
	(gdm_xdmcp_handle_got_managed_forward),
	(gdm_xdmcp_handle_keepalive), (decode_packet):
	* data/gdm.conf:
	* gui/simple-greeter/greeter-main.c: (main):
	Make XDMCP logins work.

2007-07-24  William Jon McCann  <mccann@jhu.edu>

	* daemon/gdm-display.c: (finish_idle), (queue_finish),
	(slave_exited), (slave_died), (gdm_display_manage),
	(gdm_display_real_finish), (gdm_display_finish),
	(gdm_display_dispose), (gdm_display_class_init):
	* daemon/gdm-display.h:
	* daemon/gdm-manager.c: (load_static_displays_from_file):
	* daemon/gdm-product-display.c: (gdm_product_display_finish),
	(gdm_product_display_class_init):
	* daemon/gdm-simple-slave.c: (on_session_exited),
	(on_session_died), (on_opened), (create_new_session),
	(on_greeter_start), (on_greeter_stop), (on_greeter_user_selected),
	(on_greeter_cancel), (on_greeter_connected), (run_greeter),
	(gdm_simple_slave_finalize):
	* daemon/gdm-slave-proxy.c: (child_watch),
	(gdm_slave_proxy_dispose), (gdm_slave_proxy_class_init):
	* daemon/gdm-static-display.c: (gdm_static_display_finish),
	(gdm_static_display_class_init):
	* daemon/gdm-static-factory-display.c:
	(gdm_static_factory_display_finish),
	(gdm_static_factory_display_class_init):
	Dogfood static display.  Make static display work.  Add a finished
	state to the Display.  Always restart static displays on finish.

2007-07-22  Richard Hughes  <richard@hughsie.com>

	* common/Makefile.am:
	* daemon/Makefile.am:
	* data/Makefile.am:
	* gui/simple-greeter/Makefile.am:
	* libgreeter/Makefile.am:
	* po/POTFILES.in:
	* po/POTFILES.skip:
	* utils/Makefile.am:
	Fix make distcheck.

